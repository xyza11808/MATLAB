function siStruct = createScanimageMetadataStruct

% Create scanimage metadata structure:
siStruct = struct();

% Fields relevant for Acquisition2P that you have to change depending on
% your movie file:
siStruct.SI4.scanFramePeriod = 0.0380596; % Inverse of frame rate: (frames per second)^-1

% Fields relevant for Acquisition2P that most likely should NOT be changed:
siStruct.SI4.fastZEnable = false; % Whether fast Z scanning (3D volume acquisition) is switched on);
siStruct.SI4.channelsSave = 1; % Which channels are saved (1=green/GCaMP, 2=red);
siStruct.SI4.stackNumSlices = 1; % How many slices are acquired during volume scanning (leave at 1).
siStruct.SI4.fastZDiscardFlybackFrames = 1; % How many frames are discarded during flyback during volume scanning.

% Other fields saved by scanimage (not currently used by Acquisition2P, but
% included here for completeness):
siStruct.SI4.acqFrameBufferLength = 2;
siStruct.SI4.acqFrameBufferLengthMin = 2;
siStruct.SI4.acqFramesDone = 0;
siStruct.SI4.acqNumAveragedFrames = 1;
siStruct.SI4.acqNumFrames = 100000;
siStruct.SI4.acqState = 'idle';
siStruct.SI4.beamDirectMode = false;
siStruct.SI4.beamFillFracAdjust = 0;
siStruct.SI4.beamFlybackBlanking = 1;
siStruct.SI4.beamLengthConstants = Inf;
siStruct.SI4.beamLiveAdjust = true;
siStruct.SI4.beamPowerLimits = 100;
siStruct.SI4.beamPowerUnits = 'percent';
siStruct.SI4.beamPowers = 100;
siStruct.SI4.beamPzAdjust = false;
siStruct.SI4.cfgFilename = 'C:\data\config\scanimage\matthias.cfg';
siStruct.SI4.channelsAutoReadOffsets = false;
siStruct.SI4.channelsAutoReadOffsetsOnFocus = false;
siStruct.SI4.channelsDataType = 'int16';
siStruct.SI4.channelsDisplay = 1;
siStruct.SI4.channelsInputRange = {[0 0.2] [0 0.2] [0 4] [0 4]};
siStruct.SI4.channelsLUT = [-100 8191;0 5556;0 8191;0 8191];
siStruct.SI4.channelsMergeColor = {'green' 'red' 'gray' 'none'};
siStruct.SI4.channelsMergeEnable = false;
siStruct.SI4.channelsMergeFocusOnly = false;
siStruct.SI4.channelsOffset = [-275;-483;22;33];
siStruct.SI4.channelsSubtractOffset = [true;true;false;false];
siStruct.SI4.displayFrameBatchFactor = 1;
siStruct.SI4.displayFrameBatchFactorLock = false;
siStruct.SI4.displayFrameBatchSelectLast = 0;
siStruct.SI4.displayFrameBatchSelection = 1;
siStruct.SI4.displayRollingAverageFactor = 1;
siStruct.SI4.displayRollingAverageFactorLock = 0;
siStruct.SI4.displayShowCrosshair = false;
siStruct.SI4.errorCondition = false;
siStruct.SI4.errorConditionIdentifiers = {};
siStruct.SI4.errorConditionMessages = {};
siStruct.SI4.fastCfgAutoStartTf = [false;false;false;false;false;false];
siStruct.SI4.fastCfgAutoStartType = {[];[];[];[];[];[]};
siStruct.SI4.fastCfgCfgFilenames = {'';'';'';'';'';''};
siStruct.SI4.fastZAcquisitionDelay = 0.015;
siStruct.SI4.fastZActive = false;
siStruct.SI4.fastZAllowLiveBeamAdjust = false;
siStruct.SI4.fastZDiscardFlybackFrames = 1;
siStruct.SI4.fastZFillFraction = [];
siStruct.SI4.fastZFramePeriodAdjustment = -100;
siStruct.SI4.fastZImageType = 'XY-Z';
siStruct.SI4.fastZNumDiscardFrames = 1;
siStruct.SI4.fastZNumVolumes = 2000;
siStruct.SI4.fastZPeriod = [];
siStruct.SI4.fastZScanType = 'sawtooth';
siStruct.SI4.fastZSettlingTime = 0.03;
siStruct.SI4.fastZUseAOControl = true;
siStruct.SI4.fastZVolumesDone = 0;
siStruct.SI4.focusDuration = 120;
siStruct.SI4.frameAcqFcnDecimationFactor = 1;
siStruct.SI4.loggingEnable = 1;
siStruct.SI4.loggingFileCounter = 1;
siStruct.SI4.loggingFileCounterAutoReset = true;
siStruct.SI4.loggingFilePath = 'D:\data\Matthias\MM052\MM052_141217';
siStruct.SI4.loggingFileStem = 'MM052_141217_task';
siStruct.SI4.loggingFramesPerFile = 1000;
siStruct.SI4.loggingFramesPerFileLock = false;
siStruct.SI4.loggingMaxFileSize = [];
siStruct.SI4.loopNumRepeats = Inf;
siStruct.SI4.loopRepeatPeriod = 10;
siStruct.SI4.loopRepeatsDone = 0;
siStruct.SI4.maxFrameEventRate = 65;
siStruct.SI4.motorFastMotionThreshold = 100;
siStruct.SI4.motorHasMotor = true;
siStruct.SI4.motorHasSecondMotor = false;
siStruct.SI4.motorMoveTimeout = 5;
siStruct.SI4.motorSecondMotorZEnable = false;
siStruct.SI4.motorUserDefinedPositions = {};
siStruct.SI4.pmtEnable = [];
siStruct.SI4.pmtGain = [];
siStruct.SI4.scanAngleMultiplierFast = 1;
siStruct.SI4.scanAngleMultiplierSlow = 1;
siStruct.SI4.scanFOVAngularRangeFast = 13.2;
siStruct.SI4.scanFOVAngularRangeSlow = 13.2;
siStruct.SI4.scanFillFraction = 0.66;
siStruct.SI4.scanFillFractionSpatial = 0.860742;
siStruct.SI4.scanForceSquarePixel = true;
siStruct.SI4.scanForceSquarePixelation = true;
siStruct.SI4.scanFramePeriod = 0.0380596;
siStruct.SI4.scanFrameRate = 26.2746;
siStruct.SI4.scanFramesStarted = 0;
siStruct.SI4.scanLinePeriod = 6.32111e-05;
siStruct.SI4.scanLinesPerFrame = 512;
siStruct.SI4.scanMinZoomFactor = 1;
siStruct.SI4.scanMode = 'bidirectional';
siStruct.SI4.scanParamCache = [];
siStruct.SI4.scanPhase = 49;
siStruct.SI4.scanPhaseFine = 0;
siStruct.SI4.scanPhaseFineMap = NaN;
siStruct.SI4.scanPhaseMap = NaN;
siStruct.SI4.scanPixelTimeMaxMinRatio = 1.96836;
siStruct.SI4.scanPixelTimeMean = 9.4708e-08;
siStruct.SI4.scanPixelsPerLine = 512;
siStruct.SI4.scanZoomFactor = 1;
siStruct.SI4.secondsCounter = 4.86;
siStruct.SI4.shutterDelay = 0;
siStruct.SI4.stackEndPower = NaN;
siStruct.SI4.stackNumSlices = 1;
siStruct.SI4.stackReturnHome = true;
siStruct.SI4.stackSlicesDone = 0;
siStruct.SI4.stackStartCentered = 0;
siStruct.SI4.stackStartPower = NaN;
siStruct.SI4.stackUseStartPower = false;
siStruct.SI4.stackUserOverrideLz = false;
siStruct.SI4.stackZEndPos = NaN;
siStruct.SI4.stackZStartPos = NaN;
siStruct.SI4.stackZStepSize = -5;
siStruct.SI4.statusString = 'Acquisition idle';
siStruct.SI4.triggerExtStartTrigPreScan = true;
siStruct.SI4.triggerExtStartTrigTimeout = 30;
siStruct.SI4.triggerExtTrigEnable = false;
siStruct.SI4.triggerMaxLoopInterval = 42.95;
siStruct.SI4.triggerMaxLoopIntervalFrames = 10000;
siStruct.SI4.triggerNextTrigEdge = 'rising';
siStruct.SI4.triggerNextTrigMode = 'advance';
siStruct.SI4.triggerNextTrigSrc = [];
siStruct.SI4.triggerStartTrigEdge = 'rising';
siStruct.SI4.triggerStartTrigSrc = [];
siStruct.SI4.triggerTimestampResolution = 1e-08;
siStruct.SI4.userFunctionsCfg = NaN;
siStruct.SI4.userFunctionsOverride = NaN;
siStruct.SI4.userFunctionsUsr = NaN;
siStruct.SI4.usrPropListCurrent = {'triggerExtStartTrigTimeout';'focusDuration';'acqFrameBufferLengthMin';'fastCfgCfgFilenames';'fastCfgAutoStartTf';'fastCfgAutoStartType';'beamPzAdjust';'beamDirectMode';'beamLengthConstants';'stackUserOverrideLz';'userFunctionsUsr';'displayShowCrosshair';'channelsLUT';'channelsMergeColor';'channelsMergeEnable';'channelsMergeFocusOnly';'channelsAutoReadOffsetsOnFocus';'channelsSubtractOffset';'scanParamCache';'pmtGain';'pmtEnable';'loggingFileCounterAutoReset'};
siStruct.SI4.triggerClockTimeFirst = '17-12-2014 11:13:19.248';
siStruct.SI4.triggerFrameNumber = 1;
siStruct.SI4.triggerFrameStartTime = 0;
siStruct.SI4.triggerTime = -0.38697616;